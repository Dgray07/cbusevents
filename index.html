<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/> <!-- SEO META TAGS -->
<title id="pageTitle">CBUSEVENTS — Columbus Ohio Event Venues & Nightlife Directory</title>
<meta name="description" content="Discover the best bars, comedy clubs, concert halls, and event spaces in Columbus, Ohio. Browse upcoming events or list your venue on CBUSEVENTS — Columbus's event directory.">
<meta name="keywords" content="Columbus Ohio venues, Columbus bars, Columbus comedy clubs, Short North bars, Columbus events, event spaces Columbus Ohio, nightlife Columbus">
<meta name="robots" content="index, follow">
<meta name="author" content="CBUSEVENTS">
<link rel="canonical" href="https://cbusevents.com"> <!-- Open Graph (Facebook/LinkedIn) -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://cbusevents.com">
<meta property="og:title" content="CBUSEVENTS — Columbus Ohio Venues & Events">
<meta property="og:description" content="The Columbus event directory. Discover bars, comedy clubs, concert halls & unique spaces. Browse upcoming events or list your venue.">
<meta property="og:image" content="https://cbusevents.com/og-image.png"> <!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="CBUSEVENTS — Columbus Ohio Venues & Events">
<meta name="twitter:description" content="The Columbus event directory. Discover bars, comedy clubs, and unique event spaces.">
<meta name="twitter:image" content="https://cbusevents.com/og-image.png"> <!-- Structured Data for Google -->
<script type="application/ld+json">
{
 "@context": "https://schema.org",
 "@type": "WebSite",
 "name": "CBUSEVENTS",
 "url": "https://cbusevents.com",
 "description": "Columbus Ohio event venue and nightlife directory",
 "potentialAction": {
 "@type": "SearchAction",
 "target": "https://cbusevents.com/?search={search_term_string}",
 "query-input": "required name=search_term_string"
 }
}
</script> <link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@600;700;800&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet"> <style>
* { box-sizing: border-box; margin: 0; padding: 0; }
:root {
 --bg:#0b0b0f; --surface:#13131a; --card:#1a1a24; --border:#25252f;
 --text:#e8e8f0; --sub:#8888a0; --muted:#55556a;
 --orange:#FF6B35; --green:#22c55e; --gold:#f59e0b; --blue:#60a5fa;
}
html { scroll-behavior: smooth; }
body { background:var(--bg); color:var(--text); font-family:'DM Sans',sans-serif; }
a { text-decoration:none; color:inherit; }
button { cursor:pointer; font-family:'DM Sans',sans-serif; border:none; }
@keyframes spin { to { transform:rotate(360deg); } }
@keyframes fadeUp { from { opacity:0; transform:translateY(24px); } to { opacity:1; transform:translateY(0); } }
@keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
@keyframes heroPan { 0%,100% { transform:scale(1.05) translateX(0); } 50% { transform:scale(1.08) translateX(-2%); } }

/* ── NAV ── */
nav {
 position:sticky; top:0; z-index:100;
 background:rgba(11,11,15,0.92); backdrop-filter:blur(16px);
 border-bottom:1px solid var(--border);
 display:flex; align-items:center; justify-content:space-between;
 padding:0 48px; height:62px;
}
.nav-logo { font-family:'Syne',sans-serif; font-weight:800; font-size:20px; cursor:pointer; }
.nav-logo span { color:var(--orange); }
.nav-links { display:flex; gap:4px; }
.nav-link {
 background:none; border:none; color:var(--sub); font-size:14px;
 padding:7px 16px; border-radius:8px; font-weight:500; transition:all 0.15s;
}
.nav-link:hover,.nav-link.active { background:var(--card); color:var(--text); }
.nav-cta {
 background:var(--orange); color:#fff; padding:8px 20px;
 border-radius:8px; font-size:13px; font-weight:700; transition:opacity 0.15s;
}
.nav-cta:hover { opacity:0.85; }

/* ── HERO ── */
.hero { position:relative; min-height:580px; display:flex; align-items:center; overflow:hidden; }
.hero-slides { position:absolute; inset:0; }
.hero-slide {
 position:absolute; inset:0; opacity:0; transition:opacity 1.2s ease;
 background-size:cover; background-position:center;
 animation:heroPan 20s ease-in-out infinite;
}
.hero-slide.active { opacity:1; }
.hero-overlay {
 position:absolute; inset:0;
 background:linear-gradient(to right, rgba(11,11,15,0.97) 35%, rgba(11,11,15,0.5) 70%, rgba(11,11,15,0.2) 100%);
}
.hero-overlay2 { position:absolute; inset:0; background:linear-gradient(to top, rgba(11,11,15,0.9) 0%, transparent 40%); }
.hero-content { position:relative; z-index:2; padding:64px 48px; max-width:620px; animation:fadeUp 0.7s ease; }
.hero-eyebrow {
 display:inline-flex; align-items:center; gap:6px;
 background:var(--orange); color:#fff; border-radius:20px;
 padding:4px 14px; font-size:11px; font-weight:700;
 letter-spacing:1.5px; text-transform:uppercase; margin-bottom:18px;
}
.hero-title {
 font-family:'Syne',sans-serif; font-weight:800;
 font-size:clamp(34px,5vw,56px); line-height:1.08; margin-bottom:16px;
}
.hero-title span { color:var(--orange); }
.hero-sub { color:var(--sub); font-size:16px; line-height:1.65; margin-bottom:32px; max-width:460px; }
.hero-actions { display:flex; gap:12px; flex-wrap:wrap; margin-bottom:36px; }
.btn-primary { background:var(--orange); color:#fff; padding:13px 28px; border-radius:10px; font-size:15px; font-weight:700; transition:opacity 0.15s; }
.btn-primary:hover { opacity:0.85; }
.btn-outline { background:transparent; color:var(--text); border:1.5px solid rgba(255,255,255,0.2); padding:13px 24px; border-radius:10px; font-size:15px; font-weight:500; transition:all 0.15s; }
.btn-outline:hover { background:var(--card); border-color:var(--border); }

/* Hero slide dots */
.hero-dots { display:flex; gap:6px; }
.hero-dot { width:24px; height:3px; border-radius:2px; background:rgba(255,255,255,0.25); cursor:pointer; transition:all 0.3s; }
.hero-dot.active { background:var(--orange); width:36px; }

/* Hero floating cards */
.hero-cards {
 position:absolute; right:48px; top:50%; transform:translateY(-50%);
 z-index:3; display:flex; flex-direction:column; gap:10px; width:290px;
}
.hero-card {
 background:rgba(19,19,26,0.85); backdrop-filter:blur(16px);
 border:1px solid rgba(255,255,255,0.08); border-radius:14px; padding:14px 16px;
 display:flex; gap:12px; align-items:center; cursor:pointer; transition:all 0.2s;
 animation:fadeIn 0.5s ease;
}
.hero-card:hover { border-color:var(--orange); transform:translateX(-4px); }
.hero-card-icon { width:46px; height:46px; border-radius:10px; background:var(--card); display:flex; align-items:center; justify-content:center; font-size:20px; flex-shrink:0; overflow:hidden; }
.hero-card-icon img { width:100%; height:100%; object-fit:cover; }
.hero-card-label { font-size:10px; color:var(--orange); font-weight:700; text-transform:uppercase; letter-spacing:1px; margin-bottom:3px; }
.hero-card-title { font-weight:600; font-size:13px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.hero-card-meta { font-size:11px; color:var(--sub); margin-top:2px; }

/* Hero stats bar */
.hero-stats {
 position:absolute; bottom:0; left:0; right:0; z-index:2;
 display:flex; border-top:1px solid rgba(255,255,255,0.06);
 background:rgba(11,11,15,0.8); backdrop-filter:blur(8px);
}
.hero-stat { flex:1; padding:14px 24px; border-right:1px solid rgba(255,255,255,0.06); text-align:center; }
.hero-stat:last-child { border-right:none; }
.hero-stat-num { font-family:'Syne',sans-serif; font-size:22px; font-weight:800; color:var(--orange); }
.hero-stat-label { font-size:11px; color:var(--sub); margin-top:2px; }

/* ── SEARCH ── */
.search-section { padding:28px 48px; background:var(--surface); border-bottom:1px solid var(--border); }
.search-inner { max-width:920px; margin:0 auto; }
.search-bar { display:flex; gap:10px; }
.search-wrap { flex:1; position:relative; }
.search-icon { position:absolute; left:14px; top:50%; transform:translateY(-50%); color:var(--muted); }
.search-input {
 width:100%; background:var(--card); border:1px solid var(--border); border-radius:10px;
 padding:13px 16px 13px 42px; color:var(--text); font-family:'DM Sans',sans-serif;
 font-size:15px; outline:none; transition:border-color 0.2s;
}
.search-input:focus { border-color:var(--orange); }
.search-select {
 background:var(--card); border:1px solid var(--border); border-radius:10px;
 padding:13px 16px; color:var(--text); font-family:'DM Sans',sans-serif;
 font-size:14px; outline:none; min-width:160px;
}
.filter-chips { display:flex; gap:8px; flex-wrap:wrap; margin-top:14px; }
.chip {
 background:var(--card); border:1px solid var(--border); border-radius:20px;
 padding:6px 14px; font-size:13px; font-weight:500; color:var(--sub);
 cursor:pointer; transition:all 0.15s;
}
.chip:hover { border-color:var(--orange); color:var(--text); }
.chip.active { background:var(--orange); border-color:var(--orange); color:#fff; }

/* ── SECTIONS ── */
.section { padding:52px 48px; }
.section-alt { background:var(--surface); }
.section-header { display:flex; justify-content:space-between; align-items:flex-end; margin-bottom:28px; }
.section-title { font-family:'Syne',sans-serif; font-size:22px; font-weight:800; }
.section-sub { color:var(--sub); font-size:13px; margin-top:4px; }
.see-all { color:var(--orange); font-size:13px; font-weight:600; background:none; border:none; white-space:nowrap; }

/* ── CATEGORY PILLS ── */
.cat-pills { display:flex; gap:10px; flex-wrap:wrap; margin-bottom:36px; }
.cat-pill {
 display:flex; align-items:center; gap:8px;
 background:var(--card); border:1px solid var(--border); border-radius:12px;
 padding:12px 18px; cursor:pointer; transition:all 0.2s; text-align:left;
}
.cat-pill:hover { border-color:var(--orange); background:#1a1a24; }
.cat-pill-icon { font-size:20px; }
.cat-pill-name { font-weight:600; font-size:14px; }
.cat-pill-count { font-size:11px; color:var(--sub); margin-top:1px; }

/* ── VENUE CARDS ── */
.venue-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:18px; }
.venue-card {
 background:var(--card); border:1px solid var(--border); border-radius:16px;
 overflow:hidden; cursor:pointer; transition:all 0.2s; display:flex; flex-direction:column;
}
.venue-card:hover { border-color:var(--orange); transform:translateY(-3px); box-shadow:0 12px 40px rgba(0,0,0,0.4); }
.venue-card-img { width:100%; height:170px; object-fit:cover; background:var(--surface); display:flex; align-items:center; justify-content:center; font-size:44px; overflow:hidden; position:relative; }
.venue-card-img img { width:100%; height:100%; object-fit:cover; }
.venue-tier-badge { position:absolute; top:10px; right:10px; border-radius:20px; padding:3px 10px; font-size:10px; font-weight:700; }
.tier-premium { background:#f59e0b; color:#000; }
.tier-standard { background:#3b82f6; color:#fff; }
.venue-card-body { padding:16px; flex:1; display:flex; flex-direction:column; }
.venue-card-type { font-size:11px; color:var(--orange); font-weight:600; text-transform:uppercase; letter-spacing:0.5px; margin-bottom:5px; }
.venue-card-name { font-family:'Syne',sans-serif; font-weight:700; font-size:17px; margin-bottom:7px; }
.venue-card-desc { color:var(--sub); font-size:13px; line-height:1.55; margin-bottom:12px; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; flex:1; }
.venue-card-footer { display:flex; justify-content:space-between; align-items:center; }
.venue-card-loc { font-size:12px; color:var(--muted); }
.tags { display:flex; gap:4px; flex-wrap:wrap; margin-top:10px; }
.tag { background:var(--surface); color:var(--sub); border-radius:20px; padding:3px 9px; font-size:11px; }

/* ── EVENT CARDS ── */
.event-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(265px,1fr)); gap:14px; }
.event-card {
 background:var(--card); border:1px solid var(--border); border-radius:12px;
 overflow:hidden; cursor:pointer; transition:all 0.2s; display:flex;
}
.event-card:hover { border-color:var(--orange); transform:translateY(-2px); }
.event-accent { width:4px; flex-shrink:0; background:var(--orange); }
.event-accent.green { background:var(--green); }
.event-body { padding:14px 16px; flex:1; }
.event-cat { font-size:11px; color:var(--orange); font-weight:600; text-transform:uppercase; letter-spacing:0.5px; margin-bottom:5px; display:flex; align-items:center; gap:6px; }
.week-badge { background:#22c55e22; color:var(--green); border:1px solid #22c55e44; border-radius:20px; padding:2px 8px; font-size:10px; font-weight:700; }
.event-title { font-weight:600; font-size:14px; margin-bottom:5px; line-height:1.4; }
.event-venue { font-size:12px; color:var(--sub); margin-bottom:10px; }
.event-pills { display:flex; gap:6px; flex-wrap:wrap; }
.event-pill { background:var(--surface); border-radius:6px; padding:4px 8px; font-size:12px; color:var(--text); font-weight:500; }
.event-pill.free { color:var(--green); }

/* ── VENUE DETAIL PAGE ── */
.venue-detail-header {
 position:relative; height:320px; overflow:hidden;
 display:flex; align-items:flex-end;
}
.venue-detail-bg { position:absolute; inset:0; object-fit:cover; width:100%; height:100%; }
.venue-detail-overlay { position:absolute; inset:0; background:linear-gradient(to top, rgba(11,11,15,1) 0%, rgba(11,11,15,0.3) 100%); }
.venue-detail-meta { position:relative; z-index:2; padding:32px 48px; width:100%; }
.venue-detail-type { font-size:12px; color:var(--orange); font-weight:700; text-transform:uppercase; letter-spacing:1px; margin-bottom:8px; }
.venue-detail-name { font-family:'Syne',sans-serif; font-size:clamp(28px,4vw,44px); font-weight:800; }

.venue-detail-body { padding:40px 48px; max-width:1100px; }
.venue-detail-grid { display:grid; grid-template-columns:1fr 360px; gap:40px; align-items:start; }
.info-row { display:flex; align-items:center; gap:10px; font-size:14px; color:var(--sub); margin-bottom:12px; }
.info-row strong { color:var(--text); }
.amenity-chips { display:flex; flex-wrap:wrap; gap:8px; }
.amenity-chip { background:var(--surface); border:1px solid var(--border); border-radius:8px; padding:6px 12px; font-size:13px; }

.inquiry-card { background:var(--card); border:1px solid var(--border); border-radius:16px; padding:24px; position:sticky; top:80px; }
.inquiry-card h3 { font-family:'Syne',sans-serif; font-size:18px; font-weight:700; margin-bottom:20px; }
.field { margin-bottom:14px; }
.field label { display:block; font-size:12px; color:var(--sub); font-weight:500; margin-bottom:5px; }
.field input, .field textarea, .field select {
 width:100%; background:var(--bg); border:1px solid var(--border); border-radius:8px;
 padding:10px 13px; color:var(--text); font-family:'DM Sans',sans-serif; font-size:14px; outline:none;
}
.field input:focus, .field textarea:focus { border-color:var(--orange); }
.field textarea { min-height:80px; resize:vertical; }
.field-row { display:grid; grid-template-columns:1fr 1fr; gap:10px; }

/* ── CATEGORY PAGE ── */
.cat-hero {
 background:linear-gradient(135deg, #130800 0%, #1a1000 50%, #0b0b0f 100%);
 border-bottom:1px solid var(--border); padding:52px 48px;
}
.cat-hero-title { font-family:'Syne',sans-serif; font-size:clamp(28px,4vw,48px); font-weight:800; margin-bottom:10px; }
.cat-hero-sub { color:var(--sub); font-size:16px; max-width:560px; line-height:1.6; }
.breadcrumb { display:flex; align-items:center; gap:8px; margin-bottom:20px; font-size:13px; color:var(--muted); }
.breadcrumb span { color:var(--text); }
.breadcrumb button { background:none; border:none; color:var(--orange); font-size:13px; }

/* ── MODAL ── */
.modal-overlay {
 position:fixed; inset:0; background:rgba(0,0,0,0.85);
 z-index:200; display:flex; align-items:flex-start; justify-content:center;
 padding:40px 20px; overflow-y:auto;
}
.modal {
 background:var(--card); border:1px solid var(--border); border-radius:18px;
 width:100%; max-width:680px; overflow:hidden; animation:fadeUp 0.3s ease;
}
.modal-close-btn {
 position:absolute; top:14px; right:14px; background:rgba(0,0,0,0.5);
 backdrop-filter:blur(8px); border:1px solid rgba(255,255,255,0.1);
 border-radius:8px; width:36px; height:36px; font-size:16px; color:#fff;
 display:flex; align-items:center; justify-content:center;
}

/* ── CTA BANNER ── */
.cta-banner {
 margin:0 48px 52px; border-radius:18px;
 background:linear-gradient(135deg, #1a0f00 0%, #250e00 40%, #1a1a24 100%);
 border:1px solid #FF6B3530; padding:52px 56px;
 display:flex; justify-content:space-between; align-items:center; gap:32px;
}
.cta-banner h2 { font-family:'Syne',sans-serif; font-size:28px; font-weight:800; margin-bottom:10px; }
.cta-banner p { color:var(--sub); font-size:15px; line-height:1.6; max-width:480px; }
.cta-actions { display:flex; flex-direction:column; gap:10px; flex-shrink:0; }
.btn-secondary { background:var(--card); color:var(--text); border:1px solid var(--border); padding:13px 24px; border-radius:10px; font-size:14px; font-weight:500; transition:all 0.15s; }
.btn-secondary:hover { border-color:var(--muted); }

/* ── FOOTER ── */
footer { background:var(--surface); border-top:1px solid var(--border); padding:52px 48px 32px; }
.footer-grid { display:grid; grid-template-columns:2fr 1fr 1fr 1fr; gap:40px; margin-bottom:40px; }
.footer-logo { font-family:'Syne',sans-serif; font-size:22px; font-weight:800; margin-bottom:10px; }
.footer-logo span { color:var(--orange); }
.footer-desc { color:var(--sub); font-size:13px; line-height:1.7; max-width:260px; }
.footer-col h4 { font-weight:700; font-size:13px; margin-bottom:14px; }
.footer-link { display:block; color:var(--sub); font-size:13px; margin-bottom:9px; cursor:pointer; transition:color 0.15s; }
.footer-link:hover { color:var(--orange); }
.footer-bottom { border-top:1px solid var(--border); padding-top:24px; display:flex; justify-content:space-between; }
.footer-copy { color:var(--muted); font-size:12px; }

/* ── SPINNER ── */
.spinner { width:32px; height:32px; border:3px solid var(--border); border-top-color:var(--orange); border-radius:50%; animation:spin 0.8s linear infinite; margin:60px auto; display:block; }

/* ── EMPTY ── */
.empty { text-align:center; padding:60px 20px; color:var(--sub); }
.empty-icon { font-size:48px; margin-bottom:16px; }
.empty h3 { font-family:'Syne',sans-serif; font-size:18px; font-weight:700; margin-bottom:8px; color:var(--text); }

/* ── RESPONSIVE ── */
/* ── TABLET ── */
@media(max-width:900px){
 nav{padding:0 20px;}
 .hero-cards{display:none;}
 .hero-content{padding:40px 20px;}
 .search-section{padding:20px;}
 .section{padding:36px 20px;}
 .venue-detail-grid{grid-template-columns:1fr;}
 .venue-detail-body,.venue-detail-meta{padding:24px 20px;}
 .footer-grid{grid-template-columns:1fr 1fr;}
 .cta-banner{flex-direction:column;margin:0 20px 36px;padding:36px 24px;}
 .cat-hero{padding:36px 20px;}
 .hero-stats{display:none;}
}

/* ── MOBILE ── */
@media(max-width:680px){
 /* NAV */
 nav{padding:0 16px;height:56px;}
 .nav-links{display:none;}
 #joinDropdown .nav-link{font-size:12px;padding:6px 10px;}
 #joinMenu{min-width:160px;right:-10px;}
 .nav-cta{padding:7px 14px;font-size:12px;}
 .nav-logo{font-size:17px;}

 /* HERO */
 .hero-content{padding:32px 16px 24px;}
 .hero-title{font-size:32px !important;}
 .hero-sub{font-size:14px !important;}
 .hero-actions{flex-wrap:wrap;gap:8px;}
 .hero-actions button{font-size:13px;padding:10px 16px;}
 .hero-dots{margin-top:16px;}

 /* SEARCH */
 .search-section{padding:16px;}
 .search-bar{flex-direction:column;gap:8px;}
 .search-select{width:100%;}
 .filter-chips{gap:6px;}
 .chip{font-size:12px;padding:5px 12px;}

 /* CATEGORIES */
 .cat-pills{grid-template-columns:1fr 1fr !important;gap:10px;}
 .cat-pill{padding:14px 12px;}
 .cat-pill-name{font-size:13px;}

 /* SECTIONS */
 .section{padding:28px 16px;}
 .section-title{font-size:18px !important;}
 .section-header{flex-direction:column;align-items:flex-start;gap:8px;}

 /* CARDS */
 .venue-grid{grid-template-columns:1fr !important;}
 .event-grid{grid-template-columns:1fr !important;}

 /* MISSION SECTION */
 .mission-grid{grid-template-columns:1fr !important;gap:32px !important;}
 .mission-stats{grid-template-columns:1fr 1fr !important;}
 .mission-pad{padding:40px 16px !important;}

 /* WHO ITS FOR */
 .who-grid{grid-template-columns:1fr 1fr !important;gap:10px !important;}
 .who-pad{padding:0 16px 48px !important;}
 .who-card{padding:18px 14px !important;}
 .who-card-icon{font-size:26px !important;}
 .who-card-title{font-size:14px !important;}
 .who-card-desc{display:none;}

 /* NEIGHBORHOODS */
 .hood-pad{padding:0 0 48px !important;}
 .hood-pad-inner{padding:0 16px !important;}
 .hood-scroll{padding:0 16px 12px !important;}

 /* CTA BANNER */
 .cta-banner{flex-direction:column;margin:0 16px 32px;padding:28px 20px;}
 .cta-banner h2{font-size:20px;}
 .cta-banner p{font-size:13px;}

 /* FOOTER */
 .footer-grid{grid-template-columns:1fr !important;}
 footer{padding:32px 16px 24px;}
 .footer-bottom{flex-direction:column;gap:8px;}
}

.save-btn{transition:all 0.15s;}
.save-btn.saved{color:#ef4444 !important;border-color:#ef444460 !important;}
.save-btn:hover{background:rgba(0,0,0,0.85) !important;}
.join-item{display:flex;align-items:center;padding:9px 14px;border-radius:8px;font-size:13px;font-weight:500;color:#8888a0;text-decoration:none;transition:all 0.15s;}
.join-item:hover{background:#13131a;color:#e8e8f0;}
</style>
</head>
<body> <!-- NAV -->
<nav id="topNav"> <div class="nav-logo" onclick="showPage('home')">CBUS<span>EVENTS</span></div> <div class="nav-links"> <button class="nav-link" id="nav-home" onclick="showPage('home')">Home</button> <button class="nav-link" id="nav-venues" onclick="showPage('venues')">Venues</button> <button class="nav-link" id="nav-events" onclick="showPage('events')">Events</button> </div> <div style="display:flex;align-items:center;gap:10px"> <div style="position:relative" id="joinDropdown"> <button class="nav-link" onclick="toggleJoinMenu()" style="display:flex;align-items:center;gap:4px">Join ▾</button> <div id="joinMenu" style="display:none;position:absolute;top:calc(100% + 8px);right:0;background:#1a1a24;border:1px solid #25252f;border-radius:12px;padding:8px;min-width:190px;box-shadow:0 16px 40px rgba(0,0,0,0.5);z-index:200;"> <a href="https://cbusevents.com/venues.html" style="display:flex;align-items:center;gap:8px;padding:9px 14px;border-radius:8px;font-size:13px;font-weight:500;color:#8888a0;text-decoration:none;transition:all 0.15s;" onmouseover="this.style.background='#13131a';this.style.color='#e8e8f0'" onmouseout="this.style.background='';this.style.color='#8888a0'"> List Your Venue</a> <a href="https://cbusevents.com/vendors.html" style="display:flex;align-items:center;gap:8px;padding:9px 14px;border-radius:8px;font-size:13px;font-weight:500;color:#8888a0;text-decoration:none;transition:all 0.15s;" onmouseover="this.style.background='#13131a';this.style.color='#e8e8f0'" onmouseout="this.style.background='';this.style.color='#8888a0'"> List Your Services</a> <a href="https://cbusevents.com/planners.html" style="display:flex;align-items:center;gap:8px;padding:9px 14px;border-radius:8px;font-size:13px;font-weight:500;color:#8888a0;text-decoration:none;transition:all 0.15s;" onmouseover="this.style.background='#13131a';this.style.color='#e8e8f0'" onmouseout="this.style.background='';this.style.color='#8888a0'"> Event Planners</a> <div style="height:1px;background:#25252f;margin:4px 8px;"></div> <a href="https://cbusevents.com/attendees.html" style="display:flex;align-items:center;gap:8px;padding:9px 14px;border-radius:8px;font-size:13px;font-weight:500;color:#8888a0;text-decoration:none;transition:all 0.15s;" onmouseover="this.style.background='#13131a';this.style.color='#e8e8f0'" onmouseout="this.style.background='';this.style.color='#8888a0'"> Find Events</a> </div> </div> <a href="https://cbusevents.com/auth.html" class="nav-cta" style="text-decoration:none">Sign In</a> </div>
</nav> <div id="app"> <div style="min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px"> <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:28px">CBUS<span style="color:#FF6B35">EVENTS</span></div> <div style="width:32px;height:32px;border:3px solid #25252f;border-top-color:#FF6B35;border-radius:50%;animation:spin 0.8s linear infinite"></div> <div style="color:#8888a0;font-size:13px">Loading Columbus venues...</div> </div>
</div> <!-- EVENT MODAL -->
<div id="eventModal" style="display:none" class="modal-overlay" onclick="if(event.target===this)closeEventModal()"> <div class="modal" id="eventModalContent"></div>
</div> <script src="https://unpkg.com/@supabase/supabase-js@2/dist/umd/supabase.js"></script>
<script>
const SB_URL="https://toblgvatvsjljbqogzsv.supabase.co";
const SB_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvYmxndmF0dnNqbGpicW9nenN2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIxMDgwNTAsImV4cCI6MjA4NzY4NDA1MH0._WJEQPizNDiQfDXQB_DHPaQhixPGpMdmYQSmyWmm_FQ";
const sb=supabase.createClient(SB_URL,SB_KEY);

// ── STATE ─────────────────────────────────────────────────────
let allVenues=[],allEvents=[],currentPage='home',heroTimer=null,heroIdx=0;

// ── HERO SLIDES ───────────────────────────────────────────────
// Real venue photos matched to type
const HERO_SLIDES=[
 { bg:'https://images.unsplash.com/photo-1527224538127-2104bb71c51b?w=1400&q=80', label:'Bars & Nightlife', title:'Short North', sub:'16 bars and nightlife venues' },
 { bg:'https://images.unsplash.com/photo-1580809361436-42a7ec204889?w=1400&q=80', label:'Comedy', title:'Stand-Up & Improv', sub:'7 comedy clubs and performance spaces' },
 { bg:'https://images.unsplash.com/photo-1415201364774-f6f0bb35f28f?w=1400&q=80', label:'Live Music', title:'Jazz & Live Music', sub:"Columbus's best live music venues" },
 { bg:'https://images.unsplash.com/photo-1519671482749-fd09be7ccebf?w=1400&q=80', label:'Rooftop', title:'Lincoln Social', sub:'9 floors up in Short North' },
];

// Real venue image map
const VENUE_IMGS={
 // Bars & cocktail bars
 'Sacred Palm':'https://images.unsplash.com/photo-1470337458703-46ad1756a187?w=800&q=80',
 "High Beck Tavern":'https://images.unsplash.com/photo-1555992336-03a23c7b20ee?w=800&q=80',
 'Half Baked':'https://images.unsplash.com/photo-1566417713940-fe7c737a9ef2?w=800&q=80',
 'Club 185':'https://images.unsplash.com/photo-1543007630-9710e4a00a20?w=800&q=80',
 // Dive bars & jazz
 "Dick's Den":'https://images.unsplash.com/photo-1415201364774-f6f0bb35f28f?w=800&q=80',
 'Park Street Tavern':'https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?w=800&q=80',
 'Fifteen32 Social':'https://images.unsplash.com/photo-1572116469696-31de0f17cc34?w=800&q=80',
 'The Daily Bar':'https://images.unsplash.com/photo-1525268323446-0505b6fe7778?w=800&q=80',
 "Meister's Bar":'https://images.unsplash.com/photo-1574096079513-d8259312b785?w=800&q=80',
 // Rooftop
 'Lincoln Social Rooftop':'https://images.unsplash.com/photo-1519671482749-fd09be7ccebf?w=800&q=80',
 'Fives Up High':'https://images.unsplash.com/photo-1571266028243-d220c6a8c270?w=800&q=80',
 // Speakeasy / cocktail
 'Library Bar':'https://images.unsplash.com/photo-1551024709-8f23befc6f87?w=800&q=80',
 'DENMARK':'https://images.unsplash.com/photo-1510380527185-c9b8dc2f8b27?w=800&q=80',
 // Mexican / lively
 'Agave & Rye – Short North':'https://images.unsplash.com/photo-1617196034183-421b4040ed20?w=800&q=80',
 'Char Bar':'https://images.unsplash.com/photo-1559526324-593bc073d938?w=800&q=80',
 // Retro / pin up
 "Bossy Grrl's Pin Up Joint":'https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=800&q=80',
 // Comedy clubs
 'The Attic Comedy Club':'https://images.unsplash.com/photo-1585699324551-f6c309eedeca?w=800&q=80',
 'The Hashtag Comedy Club':'https://images.unsplash.com/photo-1527224538127-2104bb71c51b?w=800&q=80',
 'Columbus Funny Bone':'https://images.unsplash.com/photo-1580809361436-42a7ec204889?w=800&q=80',
 // Theatre & performance
 'The Nest Theatre':'https://images.unsplash.com/photo-1598387181032-a3103a2db5b3?w=800&q=80',
 'Up Front Performance Space':'https://images.unsplash.com/photo-1598387181032-a3103a2db5b3?w=800&q=80',
 'Columbus Improv Wars':'https://images.unsplash.com/photo-1527224538127-2104bb71c51b?w=800&q=80',
 'Crazy FUN Columbus':'https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=800&q=80',
};

function getVenueImg(venue){
 return VENUE_IMGS[venue.name] || venue.cover_image_url || null;
}

// ── INIT ──────────────────────────────────────────────────────
async function init(){
 try {
 const [vRes,eRes]=await Promise.all([
 sb.from('venues').select('*').eq('status','approved').order('tier',{ascending:false}),
 sb.from('events').select('*,venues(name,neighborhood)').eq('status','published')
 .gte('start_time',new Date().toISOString()).order('start_time',{ascending:true})
 ]);
 allVenues=vRes.data||[];
 allEvents=eRes.data||[];
 } catch(e) {
 allVenues=[];
 allEvents=[];
 }
 renderHome();
 await initNavAuth();
 await loadSavedState();
}

// ── HELPERS ───────────────────────────────────────────────────
function fmt(dt){ return new Date(dt).toLocaleDateString('en-US',{weekday:'short',month:'short',day:'numeric'}); }
function fmtTime(dt){ return new Date(dt).toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit'}); }
function isThisWeek(dt){ const d=new Date(dt),n=new Date(); return d>=n&&d<=new Date(n.getTime()+7*24*60*60*1000); }
function isPromoted(e){ return e.promoted_until && new Date(e.promoted_until)>new Date(); }
function slug(name){ return name.toLowerCase().replace(/[^a-z0-9]+/g,'-'); }
function venueEmoji(type){
 if(!type)return'';const t=type.toLowerCase();
 if(t.includes('comedy')||t.includes('improv')||t.includes('sketch'))return'';
 if(t.includes('speakeasy')||t.includes('cocktail'))return'';
 if(t.includes('rooftop'))return'';
 if(t.includes('brewery'))return'';
 if(t.includes('theatre')||t.includes('theater')||t.includes('performance'))return'';
 if(t.includes('bar')||t.includes('tavern')||t.includes('pub')||t.includes('dive'))return'';
 return'';
}
function setNavActive(page){
 document.querySelectorAll('.nav-link').forEach(el=>el.classList.remove('active'));
 const el=document.getElementById('nav-'+page);
 if(el)el.classList.add('active');
}

// ── ROUTING ───────────────────────────────────────────────────
function showPage(page,data=null){
 currentPage=page;
 if(heroTimer){clearInterval(heroTimer);heroTimer=null;}
 setNavActive(page==='venue'||page==='category'?'venues':page);
 window.scrollTo({top:0,behavior:'smooth'});
 if(page==='home')renderHome();
 else if(page==='venues')renderVenues();
 else if(page==='events')renderEvents();
 else if(page==='venue')renderVenueDetail(data);
 else if(page==='category')renderCategory(data);
 else if(page==='listVenue')renderVenueLanding();
 // Update SEO title
 const titles={home:'CBUSEVENTS — Columbus Ohio Venues & Events',venues:'Columbus Venues — CBUSEVENTS',events:'Columbus Events — CBUSEVENTS'};
 document.title=titles[page]||document.title;
}

// ── HOME ──────────────────────────────────────────────────────
function renderHome(){
 const thisWeek=allEvents.filter(e=>isThisWeek(e.start_time)).slice(0,8);
 const upcoming=allEvents.filter(e=>!isThisWeek(e.start_time)).slice(0,8);
 const neighborhoods=[...new Set(allVenues.map(v=>v.neighborhood).filter(Boolean))];

 // Category counts
 const barVenues=allVenues.filter(v=>['bar','tavern','pub','dive','speakeasy','cocktail','brewery','rooftop','nightlife','lounge'].some(k=>(v.venue_type||'').toLowerCase().includes(k)));
 const comedyVenues=allVenues.filter(v=>['comedy','improv','sketch','performance'].some(k=>(v.venue_type||'').toLowerCase().includes(k)));

 document.getElementById('app').innerHTML=`
 <!-- HERO --> <section class="hero"> <div class="hero-slides" id="heroSlides"></div> <div class="hero-overlay"></div> <div class="hero-overlay2"></div> <div class="hero-content"> <div class="hero-eyebrow">Columbus, Ohio</div> <h1 class="hero-title">Find the perfect<br><span>Columbus venue</span><br>for your event</h1> <p class="hero-sub">Discover bars, comedy clubs, rooftops, and unique spaces. Browse events or list your venue to reach thousands of Columbus organizers.</p> <div class="hero-actions"> <button class="btn-primary" onclick="showPage('venues')">Browse Venues →</button> <button class="btn-outline" onclick="showPage('events')">View Events</button> <button class="btn-outline" style="border-color:#60a5fa40;color:var(--blue)" onclick="window.open('https://cbusevents.com/cbus-planner-portal.html','_blank')"> I'm a Planner</button> <button class="btn-outline" style="border-color:#FF6B3540;color:#FF6B35" onclick="showPage('listVenue')"> List Your Venue</button> </div> <div class="hero-dots" id="heroDots"></div> </div> <div class="hero-cards" id="heroCards"></div> <div class="hero-stats"> <div class="hero-stat"><div class="hero-stat-num">${allVenues.length}</div><div class="hero-stat-label">Listed Venues</div></div> <div class="hero-stat"><div class="hero-stat-num">${allEvents.length}</div><div class="hero-stat-label">Upcoming Events</div></div> <div class="hero-stat"><div class="hero-stat-num">${neighborhoods.length}</div><div class="hero-stat-label">Neighborhoods</div></div> <div class="hero-stat"><div class="hero-stat-num">Free</div><div class="hero-stat-label">To List Your Venue</div></div> </div> </section> <!-- SEARCH --> <div class="search-section"> <div class="search-inner"> <div class="search-bar"> <div class="search-wrap"> <span class="search-icon"></span> <input class="search-input" placeholder="Search venues, events, neighborhoods..." oninput="homeSearch(this.value)"> </div> <select class="search-select" onchange="homeTypeFilter(this.value)"> <option>All Types</option> <option>Bars & Nightlife</option> <option>Comedy Clubs</option> <option>Rooftop</option> <option>Live Music</option> </select> </div> <div class="filter-chips"> ${['All','Short North','Downtown','Clintonville','Easton','Brewery District'].map(n=> `<button class="chip${n==='All'?' active':''}" onclick="homeNeighborhood('${n}',this)">${n}</button>`
 ).join('')}
 </div> </div> </div> <!-- CATEGORIES --> <section class="section"> <div class="section-header"> <div><div class="section-title">Browse by Category</div></div> </div> <div class="cat-pills"> <div class="cat-pill" onclick="showPage('category','bars')"> <div><div class="cat-pill-name">Bars & Nightlife</div><div class="cat-pill-count">${barVenues.length} venues</div></div> </div> <div class="cat-pill" onclick="showPage('category','comedy')"> <div><div class="cat-pill-name">Comedy Clubs</div><div class="cat-pill-count">${comedyVenues.length} venues</div></div> </div> <div class="cat-pill" onclick="showPage('category','rooftop')"> <div><div class="cat-pill-name">Rooftop Bars</div><div class="cat-pill-count">${allVenues.filter(v=>(v.venue_type||'').toLowerCase().includes('rooftop')).length} venues</div></div> </div> <div class="cat-pill" onclick="showPage('category','music')"> <div><div class="cat-pill-name">Live Music</div><div class="cat-pill-count">${allVenues.filter(v=>(v.amenities||[]).join(' ').toLowerCase().includes('stage')).length} venues</div></div> </div> <div class="cat-pill" onclick="showPage('category','dive')"> <div><div class="cat-pill-name">Dive Bars</div><div class="cat-pill-count">${allVenues.filter(v=>(v.venue_type||'').toLowerCase().includes('dive')).length} venues</div></div> </div> <div class="cat-pill" onclick="showPage('category','events')"> <div><div class="cat-pill-name">Private Events</div><div class="cat-pill-count">${allVenues.filter(v=>(v.tags||[]).join(' ').toLowerCase().includes('private')).length} venues</div></div> </div> </div> </section> <!-- MISSION SECTION --> <section class="mission-pad" style="padding:80px 48px;max-width:1200px;margin:0 auto;box-sizing:border-box"> <div class="mission-grid" style="display:grid;grid-template-columns:1fr 1fr;gap:60px;align-items:center"> <div> <div style="display:inline-flex;align-items:center;gap:6px;background:#FF6B3520;color:#FF6B35;border:1px solid #FF6B3540;border-radius:20px;padding:5px 16px;font-size:11px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;margin-bottom:20px"> Our Mission</div> <h2 style="font-family:'Syne',sans-serif;font-size:clamp(28px,4vw,44px);font-weight:800;line-height:1.1;margin-bottom:20px">Becoming Columbus'<br><span style="color:#FF6B35">#1 Event Platform</span></h2> <p style="color:#8888a0;font-size:16px;line-height:1.8;margin-bottom:16px">Columbus is one of the fastest-growing cities in America — and its event scene deserves a platform built specifically for it. CBUSEVENTS is that platform.</p> <p style="color:#8888a0;font-size:16px;line-height:1.8;margin-bottom:28px">We're building the single source of truth for everything happening in Columbus — connecting venues, vendors, planners, and attendees in one place so the city's culture can thrive.</p> <div style="display:flex;flex-direction:column;gap:14px"> <div style="display:flex;align-items:flex-start;gap:12px"> <div style="background:#FF6B3520;border:1px solid #FF6B3540;border-radius:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0"></div> <div><div style="font-weight:700;font-size:14px;margin-bottom:3px">Hyper-local, always</div><div style="color:#8888a0;font-size:13px;line-height:1.6">We're not a national platform that happens to include Columbus. We're built from the ground up for this city and this city only.</div></div> </div> <div style="display:flex;align-items:flex-start;gap:12px"> <div style="background:#22c55e20;border:1px solid #22c55e30;border-radius:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0"></div> <div><div style="font-weight:700;font-size:14px;margin-bottom:3px">Every seat at the table</div><div style="color:#8888a0;font-size:13px;line-height:1.6">Venues, vendors, planners, and attendees all have their own portal. Everyone benefits. Everyone grows together.</div></div> </div> <div style="display:flex;align-items:flex-start;gap:12px"> <div style="background:#60a5fa20;border:1px solid #60a5fa30;border-radius:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0"></div> <div><div style="font-weight:700;font-size:14px;margin-bottom:3px">Built to grow with you</div><div style="color:#8888a0;font-size:13px;line-height:1.6">Whether you're just getting started or you're Columbus's most iconic venue, CBUSEVENTS scales with your ambition.</div></div> </div> </div> </div> <div class="mission-stats" style="display:grid;grid-template-columns:1fr 1fr;gap:14px"> <div style="background:#1a1a24;border:1px solid #25252f;border-radius:16px;padding:24px;text-align:center"> <div style="
 <div style="font-family:'Syne',sans-serif;font-size:28px;font-weight:800;color:#FF6B35;margin-bottom:4px">${allVenues.length||'50'}+</div> <div style="color:#8888a0;font-size:13px">Columbus Venues</div> </div> <div style="background:#1a1a24;border:1px solid #25252f;border-radius:16px;padding:24px;text-align:center"> <div style="
 <div style="font-family:'Syne',sans-serif;font-size:28px;font-weight:800;color:#22c55e;margin-bottom:4px">${allEvents.length||'100'}+</div> <div style="color:#8888a0;font-size:13px">Events Listed</div> </div> <div style="background:#1a1a24;border:1px solid #25252f;border-radius:16px;padding:24px;text-align:center"> <div style="
 <div style="font-family:'Syne',sans-serif;font-size:28px;font-weight:800;color:#60a5fa;margin-bottom:4px">16+</div> <div style="color:#8888a0;font-size:13px">Vendor Categories</div> </div> <div style="background:linear-gradient(135deg,#1a0800,#1a1a24);border:1px solid #FF6B3530;border-radius:16px;padding:24px;text-align:center"> <div style="
 <div style="font-family:'Syne',sans-serif;font-size:28px;font-weight:800;color:#f59e0b;margin-bottom:4px">#1</div> <div style="color:#8888a0;font-size:13px">Columbus Only</div> </div> </div> </div> </section> <!-- WHO IT'S FOR --> <section class="who-pad" style="padding:0 48px 80px;max-width:1200px;margin:0 auto;box-sizing:border-box"> <div style="text-align:center;margin-bottom:40px"> <div style="display:inline-flex;align-items:center;gap:6px;background:#13131a;color:#8888a0;border:1px solid #25252f;border-radius:20px;padding:5px 16px;font-size:11px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;margin-bottom:14px">Built for everyone in Columbus</div> <div style="font-family:'Syne',sans-serif;font-size:clamp(24px,3vw,36px);font-weight:800">One platform. Four communities.</div> </div> <div class="who-grid" style="display:grid;grid-template-columns:repeat(4,1fr);gap:14px"> <a href="https://cbusevents.com/venues.html" style="background:linear-gradient(135deg,#1a0800,#1a1a24);border:1px solid #FF6B3530;border-radius:16px;padding:28px 20px;text-decoration:none;color:#e8e8f0;transition:all 0.2s;display:block" onmouseover="this.style.transform='translateY(-4px)';this.style.borderColor='#FF6B35'" onmouseout="this.style.transform='';this.style.borderColor='#FF6B3530'"> <div style="width:36px;height:4px;border-radius:2px;background:currentColor;margin-bottom:18px;opacity:0.8"></div> <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:17px;margin-bottom:8px">Venue Owners</div> <div style="color:#8888a0;font-size:13px;line-height:1.65;margin-bottom:16px">Get discovered, receive booking inquiries, publish events, and sell tickets.</div> <div style="color:#FF6B35;font-size:13px;font-weight:700">List your venue →</div> </a> <a href="https://cbusevents.com/vendors.html" style="background:linear-gradient(135deg,#001a20,#1a1a24);border:1px solid #60a5fa30;border-radius:16px;padding:28px 20px;text-decoration:none;color:#e8e8f0;transition:all 0.2s;display:block" onmouseover="this.style.transform='translateY(-4px)';this.style.borderColor='#60a5fa'" onmouseout="this.style.transform='';this.style.borderColor='#60a5fa30'"> <div style="width:36px;height:4px;border-radius:2px;background:currentColor;margin-bottom:18px;opacity:0.8"></div> <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:17px;margin-bottom:8px">Vendors</div> <div style="color:#8888a0;font-size:13px;line-height:1.65;margin-bottom:16px">Showcase your services, build your portfolio, and send proposals to venues and planners.</div> <div style="color:#60a5fa;font-size:13px;font-weight:700">List your services →</div> </a> <a href="https://cbusevents.com/planners.html" style="background:linear-gradient(135deg,#100a20,#1a1a24);border:1px solid #a78bfa30;border-radius:16px;padding:28px 20px;text-decoration:none;color:#e8e8f0;transition:all 0.2s;display:block" onmouseover="this.style.transform='translateY(-4px)';this.style.borderColor='#a78bfa'" onmouseout="this.style.transform='';this.style.borderColor='#a78bfa30'"> <div style="width:36px;height:4px;border-radius:2px;background:currentColor;margin-bottom:18px;opacity:0.8"></div> <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:17px;margin-bottom:8px">Event Planners</div> <div style="color:#8888a0;font-size:13px;line-height:1.65;margin-bottom:16px">Find venues, book vendors, manage events, and sell tickets all in one place.</div> <div style="color:#a78bfa;font-size:13px;font-weight:700">Join as a planner →</div> </a> <a href="https://cbusevents.com/attendees.html" style="background:linear-gradient(135deg,#001a0a,#1a1a24);border:1px solid #22c55e30;border-radius:16px;padding:28px 20px;text-decoration:none;color:#e8e8f0;transition:all 0.2s;display:block" onmouseover="this.style.transform='translateY(-4px)';this.style.borderColor='#22c55e'" onmouseout="this.style.transform='';this.style.borderColor='#22c55e30'"> <div style="width:36px;height:4px;border-radius:2px;background:currentColor;margin-bottom:18px;opacity:0.8"></div> <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:17px;margin-bottom:8px">Attendees</div> <div style="color:#8888a0;font-size:13px;line-height:1.65;margin-bottom:16px">Discover Columbus events, follow your favorite venues, and keep all your tickets in one place.</div> <div style="color:#22c55e;font-size:13px;font-weight:700">Find events →</div> </a> </div> </section> <!-- NEIGHBORHOODS STRIP --> <section class="hood-pad" style="padding:0 0 80px;overflow:hidden"> <div class="hood-pad-inner" style="text-align:center;padding:0 48px;margin-bottom:28px"> <div style="font-family:'Syne',sans-serif;font-size:clamp(22px,3vw,32px);font-weight:800;margin-bottom:8px">Explore by Neighborhood</div> <div style="color:#8888a0;font-size:14px">Every corner of Columbus, covered</div> </div> <div class="hood-scroll" style="display:flex;gap:12px;overflow-x:auto;padding:0 48px 12px;scrollbar-width:none;-webkit-overflow-scrolling:touch"> ${['Short North','Downtown','German Village','Arena District','Easton','Clintonville','OSU / Campus','Grandview','Brewery District','Italian Village'].map((hood,i)=>{
 const icons=['','','','','','','','','',''];
 const count=allVenues.filter(v=>(v.neighborhood||'').toLowerCase().includes(hood.toLowerCase().split('/')[0].trim())).length;
 return`<div onclick="homeNeighborhood('${hood.split('/')[0].trim()}',document.createElement('span'))" style="background:#1a1a24;border:1px solid #25252f;border-radius:12px;padding:16px 20px;flex-shrink:0;cursor:pointer;transition:all 0.2s;text-align:center;min-width:130px" onmouseover="this.style.borderColor='#FF6B35';this.style.background='#1a0800'" onmouseout="this.style.borderColor='#25252f';this.style.background='#1a1a24'"> <div style="font-size:24px;margin-bottom:6px">${icons[i]}</div> <div style="font-weight:700;font-size:13px;margin-bottom:3px">${hood}</div> <div style="color:#8888a0;font-size:11px">${count} venue${count!==1?'s':''}</div> </div>`;
 }).join('')}
 </div> </section> <!-- THIS WEEK --> ${thisWeek.length?`
 <section class="section section-alt"> <div class="section-header"> <div><div class="section-title"> Happening This Week</div><div class="section-sub">Events in Columbus in the next 7 days</div></div> <button class="see-all" onclick="showPage('events')">See all events →</button> </div> <div class="event-grid">${thisWeek.map(e=>eventCard(e)).join('')}</div> </section>`:''}

 <!-- FEATURED VENUES --> <section class="section"> <div class="section-header"> <div><div class="section-title"> Featured Venues</div><div class="section-sub">${allVenues.length} venues across Columbus</div></div> <button class="see-all" onclick="showPage('venues')">Browse all →</button> </div> <div class="venue-grid" id="homeVenueGrid">${allVenues.slice(0,8).map(v=>venueCard(v)).join('')}</div> </section> <!-- UPCOMING EVENTS --> ${upcoming.length?`
 <section class="section section-alt"> <div class="section-header"> <div><div class="section-title"> Upcoming Events</div><div class="section-sub">What's on in Columbus</div></div> <button class="see-all" onclick="showPage('events')">View calendar →</button> </div> <div class="event-grid">${upcoming.map(e=>eventCard(e)).join('')}</div> </section>`:''}

 <!-- CTA --> <div style="height:52px"></div> <!-- PLANNER CTA SECTION --> <section class="section section-alt"> <div style="max-width:900px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;gap:32px;flex-wrap:wrap"> <div> <div style="display:inline-flex;align-items:center;gap:6px;background:#60a5fa20;color:var(--blue);border:1px solid #60a5fa30;border-radius:20px;padding:4px 14px;font-size:11px;font-weight:700;letter-spacing:1px;text-transform:uppercase;margin-bottom:14px"> For Event Planners</div> <h2 style="font-family:'Syne',sans-serif;font-size:26px;font-weight:800;margin-bottom:10px">Planning an event in Columbus?</h2> <p style="color:var(--sub);font-size:15px;line-height:1.65;max-width:480px">Browse venues, send booking inquiries, track your requests, and list your events — all from a free planner dashboard.</p> <div style="display:flex;gap:16px;margin-top:16px;flex-wrap:wrap"> <div style="display:flex;align-items:center;gap:6px;font-size:13px;color:var(--sub)"> Free forever</div> <div style="display:flex;align-items:center;gap:6px;font-size:13px;color:var(--sub)"> Send venue inquiries</div> <div style="display:flex;align-items:center;gap:6px;font-size:13px;color:var(--sub)"> List your events</div> <div style="display:flex;align-items:center;gap:6px;font-size:13px;color:var(--sub)"> Boost for more reach</div> </div> </div> <div style="display:flex;flex-direction:column;gap:10px;flex-shrink:0"> <button class="btn-primary" style="padding:14px 28px;font-size:15px;font-weight:700;border-radius:10px;background:var(--blue)" onclick="window.open('https://cbusevents.com/cbus-planner-portal.html','_blank')">Create Free Planner Account →</button> <button class="btn-outline" style="padding:12px 24px;font-size:14px;border-radius:10px" onclick="window.open('https://cbusevents.com/cbus-planner-portal.html','_blank')">Sign In to Planner Portal</button> </div> </div> </section> <div style="height:52px"></div> <div class="cta-banner"> <div> <h2>Own a venue or host events?</h2> <p>Get discovered by thousands of Columbus event organizers. List your space free — upgrade to get featured in the hero slider and unlock premium placement across CBUSEVENTS.</p> </div> <div class="cta-actions"> <button class="btn-primary" onclick="window.open('https://cbusevents.com/cbus-venue-portal.html','_blank')">List Your Venue Free →</button> <button class="btn-secondary" onclick="showPricing()">View Pricing Plans</button> </div> </div> ${footer()}
 `;

 initHero();
 buildHeroCards();
}

function initHero(){
 const slidesEl=document.getElementById('heroSlides');
 const dotsEl=document.getElementById('heroDots');
 if(!slidesEl)return;
 slidesEl.innerHTML=HERO_SLIDES.map((s,i)=>`
 <div class="hero-slide${i===0?' active':''}" style="background-image:url('${s.bg}')"></div> `).join('');
 dotsEl.innerHTML=HERO_SLIDES.map((_,i)=>`
 <div class="hero-dot${i===0?' active':''}" onclick="goSlide(${i})"></div> `).join('');
 heroIdx=0;
 heroTimer=setInterval(()=>goSlide((heroIdx+1)%HERO_SLIDES.length),5000);
}

function goSlide(idx){
 heroIdx=idx;
 document.querySelectorAll('.hero-slide').forEach((el,i)=>el.classList.toggle('active',i===idx));
 document.querySelectorAll('.hero-dot').forEach((el,i)=>el.classList.toggle('active',i===idx));
}

function buildHeroCards(){
 const el=document.getElementById('heroCards');
 if(!el)return;
 const featuredVenues=allVenues.filter(v=>v.tier!=='free').slice(0,2);
 const showVenues=featuredVenues.length?featuredVenues:allVenues.slice(0,2);
 const nextEvent=allEvents.find(e=>isPromoted(e))||allEvents[0];
 const items=[
 ...showVenues.map(v=>({
 icon:getVenueImg(v)?`<img src="${getVenueImg(v)}" alt="${v.name}" onerror="this.parentNode.textContent='${venueEmoji(v.venue_type)}'">`:venueEmoji(v.venue_type),
 label:v.venue_type||'Venue', title:v.name, meta:v.neighborhood||v.city,
 onclick:`showPage('venue',allVenues.find(x=>x.id==='${v.id}'))`
 })),
 ...(nextEvent?[{
 icon:'', label:'Next Event', title:nextEvent.title,
 meta:`${fmt(nextEvent.start_time)} · ${fmtTime(nextEvent.start_time)}`,
 onclick:`openEventModal('${nextEvent.id}')`
 }]:[])
 ];
 el.innerHTML=items.map(item=>`
 <div class="hero-card" onclick="${item.onclick}"> <div class="hero-card-icon">${item.icon}</div> <div style="flex:1;min-width:0"> <div class="hero-card-label">${item.label}</div> <div class="hero-card-title">${item.title}</div> <div class="hero-card-meta">${item.meta}</div> </div> </div>`).join('');
}

function homeSearch(q){
 const lq=q.toLowerCase();
 const f=allVenues.filter(v=>v.name.toLowerCase().includes(lq)||(v.description||'').toLowerCase().includes(lq)||(v.neighborhood||'').toLowerCase().includes(lq)||(v.venue_type||'').toLowerCase().includes(lq));
 const g=document.getElementById('homeVenueGrid');
 if(g)g.innerHTML=f.slice(0,8).map(v=>venueCard(v)).join('')||'<div class="empty"><h3>No results</h3></div>';
}
function homeTypeFilter(type){
 const map={'Bars & Nightlife':['bar','tavern','dive','pub','lounge','speakeasy','cocktail','brewery','rooftop'],'Comedy Clubs':['comedy','improv','sketch','performance'],'Rooftop':['rooftop'],'Live Music':['concert','music']};
 const keys=map[type]||[];
 const f=type==='All Types'?allVenues:allVenues.filter(v=>keys.some(k=>(v.venue_type||'').toLowerCase().includes(k)));
 const g=document.getElementById('homeVenueGrid');
 if(g)g.innerHTML=f.slice(0,8).map(v=>venueCard(v)).join('')||`<div class="empty"><h3>No ${type} venues yet</h3></div>`;
}
function homeNeighborhood(n,el){
 document.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
 el.classList.add('active');
 const f=n==='All'?allVenues:allVenues.filter(v=>v.neighborhood===n);
 const g=document.getElementById('homeVenueGrid');
 if(g)g.innerHTML=f.slice(0,8).map(v=>venueCard(v)).join('')||`<div class="empty"><h3>No venues in ${n} yet</h3></div>`;
}

// ── VENUES PAGE ───────────────────────────────────────────────
function renderVenues(){
 const hoods=['All',...new Set(allVenues.map(v=>v.neighborhood).filter(Boolean))];
 document.getElementById('app').innerHTML=`
 <div class="search-section"> <div class="search-inner"> <div style="margin-bottom:16px"> <h1 style="font-family:'Syne',sans-serif;font-size:28px;font-weight:800;margin-bottom:4px">Columbus Venues</h1> <p style="color:var(--sub);font-size:14px">${allVenues.length} spaces for events, parties, and experiences</p> </div> <div class="search-bar"> <div class="search-wrap"> <span class="search-icon"></span> <input class="search-input" id="vSearch" placeholder="Search by name, type, neighborhood..." oninput="filterVenues()"> </div> <select class="search-select" id="vHood" onchange="filterVenues()"> ${hoods.map(n=>`<option>${n}</option>`).join('')}
 </select> <select class="search-select" id="vType" onchange="filterVenues()"> <option>All Types</option> <option>Bars & Nightlife</option> <option>Comedy Clubs</option> <option>Rooftop</option> <option>Dive Bars</option> <option>Live Music Venues</option> </select> </div> </div> </div> <section class="section"> <div class="venue-grid" id="venueGrid">${allVenues.map(v=>venueCard(v)).join('')}</div> </section> ${footer()}
 `;
}
function filterVenues(){
 const q=(document.getElementById('vSearch')?.value||'').toLowerCase();
 const n=document.getElementById('vHood')?.value||'All';
 const t=document.getElementById('vType')?.value||'All Types';
 const tmap={'Bars & Nightlife':['bar','tavern','pub','lounge','speakeasy','cocktail','brewery','rooftop','nightlife','social'],'Comedy Clubs':['comedy','improv','sketch','performance'],'Rooftop':['rooftop'],'Dive Bars':['dive'],'Live Music Venues':['concert','music']};
 const keys=tmap[t]||[];
 const f=allVenues.filter(v=>{
 const mQ=!q||v.name.toLowerCase().includes(q)||(v.description||'').toLowerCase().includes(q)||(v.venue_type||'').toLowerCase().includes(q);
 const mN=n==='All'||v.neighborhood===n;
 const mT=t==='All Types'||keys.some(k=>(v.venue_type||'').toLowerCase().includes(k));
 return mQ&&mN&&mT;
 });
 const g=document.getElementById('venueGrid');
 if(g)g.innerHTML=f.map(v=>venueCard(v)).join('')||'<div class="empty"><h3>No venues match your filters</h3></div>';
}

// ── EVENTS PAGE ───────────────────────────────────────────────
function renderEvents(){
 const cats=['All',...new Set(allEvents.map(e=>e.category).filter(Boolean))];
 const tw=allEvents.filter(e=>isThisWeek(e.start_time));
 const later=allEvents.filter(e=>!isThisWeek(e.start_time));
 document.getElementById('app').innerHTML=`
 <div class="search-section"> <div class="search-inner"> <div style="margin-bottom:16px"> <h1 style="font-family:'Syne',sans-serif;font-size:28px;font-weight:800;margin-bottom:4px">Columbus Events</h1> <p style="color:var(--sub);font-size:14px">${allEvents.length} upcoming events across Columbus</p> </div> <div class="search-bar"> <div class="search-wrap"> <span class="search-icon"></span> <input class="search-input" id="eSearch" placeholder="Search events..." oninput="filterEvents()"> </div> <select class="search-select" id="eCat" onchange="filterEvents()"> ${cats.map(c=>`<option>${c}</option>`).join('')}
 </select> </div> </div> </div> <section class="section"> <div id="eventResults"> ${tw.length?`<div class="section-header" style="margin-bottom:16px"><div><div class="section-title"> This Week</div></div></div><div class="event-grid" style="margin-bottom:40px">${tw.map(e=>eventCard(e)).join('')}</div>`:''}
 ${later.length?`<div class="section-header" style="margin-bottom:16px"><div><div class="section-title"> Coming Up</div></div></div><div class="event-grid">${later.map(e=>eventCard(e)).join('')}</div>`:''}
 ${!allEvents.length?'<div class="empty"><h3>No upcoming events yet</h3><p>Check back soon!</p></div>':''}
 </div> </section> ${footer()}
 `;
}
function filterEvents(){
 const q=(document.getElementById('eSearch')?.value||'').toLowerCase();
 const cat=document.getElementById('eCat')?.value||'All';
 const f=allEvents.filter(e=>{
 const mQ=!q||e.title.toLowerCase().includes(q)||(e.venues?.name||'').toLowerCase().includes(q);
 const mC=cat==='All'||e.category===cat;
 return mQ&&mC;
 });
 const tw=f.filter(e=>isThisWeek(e.start_time));
 const later=f.filter(e=>!isThisWeek(e.start_time));
 const el=document.getElementById('eventResults');
 if(!el)return;
 el.innerHTML=f.length?`
 ${tw.length?`<div class="section-header" style="margin-bottom:16px"><div><div class="section-title"> This Week</div></div></div><div class="event-grid" style="margin-bottom:40px">${tw.map(e=>eventCard(e)).join('')}</div>`:''}
 ${later.length?`<div class="section-header" style="margin-bottom:16px"><div><div class="section-title"> Coming Up</div></div></div><div class="event-grid">${later.map(e=>eventCard(e)).join('')}</div>`:''}
 `:'<div class="empty"><h3>No events match your search</h3></div>';
}

// ── VENUE DETAIL PAGE ─────────────────────────────────────────
async function renderVenueDetail(venue){
 if(!venue)return showPage('venues');
 document.title=`${venue.name} — CBUSEVENTS`;

 // Load this venue's events
 const{data:events}=await sb.from('events').select('*').eq('venue_id',venue.id).eq('status','published').gte('start_time',new Date().toISOString()).order('start_time',{ascending:true});
 const img=getVenueImg(venue);

 document.getElementById('app').innerHTML=`
 <!-- BREADCRUMB --> <div style="padding:14px 48px;background:var(--surface);border-bottom:1px solid var(--border)"> <div class="breadcrumb"> <button onclick="showPage('home')">Home</button> <span>›</span> <button onclick="showPage('venues')">Venues</button> <span>›</span> <span>${venue.name}</span> </div> </div> <!-- HERO IMAGE --> <div class="venue-detail-header"> ${img?`<img class="venue-detail-bg" src="${img}" alt="${venue.name}" onerror="this.style.display='none'">`:''}
 <div class="venue-detail-overlay"></div> <div class="venue-detail-meta"> <div class="venue-detail-type">${venue.venue_type||'Venue'} ${venue.tier==='premium'?'<span style="background:#f59e0b;color:#000;border-radius:20px;padding:2px 10px;font-size:10px;font-weight:700;margin-left:6px">⭐ PREMIUM</span>':''}</div> <h1 class="venue-detail-name">${venue.name}</h1> </div> </div> <!-- BODY --> <div class="venue-detail-body"> <div class="venue-detail-grid"> <!-- LEFT --> <div> <!-- Quick info --> <div style="display:flex;flex-wrap:wrap;gap:20px;margin-bottom:28px;padding:20px;background:var(--surface);border:1px solid var(--border);border-radius:12px"> ${venue.neighborhood?`<div class="info-row"> <strong>${venue.neighborhood}, Columbus OH</strong></div>`:''}
 ${venue.capacity?`<div class="info-row"> <strong>Up to ${venue.capacity} guests</strong></div>`:''}
 ${venue.indoor_outdoor?`<div class="info-row">${venue.indoor_outdoor==='indoor'?' Indoor':venue.indoor_outdoor==='outdoor'?' Outdoor':' Indoor & Outdoor'}</div>`:''}
 ${venue.phone?`<div class="info-row"> <strong><a href="tel:${venue.phone}" style="color:var(--orange)">${venue.phone}</a></strong></div>`:''}
 ${venue.website?`<div class="info-row"> <a href="${venue.website}" target="_blank" style="color:var(--orange);font-weight:600">Visit Website</a></div>`:''}
 ${venue.email?`<div class="info-row"> <a href="mailto:${venue.email}" style="color:var(--orange)">${venue.email}</a></div>`:''}
 </div> <!-- Description --> <h2 style="font-family:'Syne',sans-serif;font-size:18px;font-weight:700;margin-bottom:12px">About</h2> <p style="color:var(--sub);font-size:15px;line-height:1.75;margin-bottom:28px">${venue.description||'A great Columbus venue.'}</p> <!-- Amenities --> ${venue.amenities?.length?`
 <h2 style="font-family:'Syne',sans-serif;font-size:18px;font-weight:700;margin-bottom:12px">Amenities</h2> <div class="amenity-chips" style="margin-bottom:28px"> ${venue.amenities.map(a=>`<span class="amenity-chip"> ${a}</span>`).join('')}
 </div>`:''}

 <!-- Tags --> ${venue.tags?.length?`
 <h2 style="font-family:'Syne',sans-serif;font-size:18px;font-weight:700;margin-bottom:12px">Perfect For</h2> <div class="tags" style="margin-bottom:28px"> ${venue.tags.map(t=>`<span class="tag" style="font-size:13px;padding:5px 12px">${t}</span>`).join('')}
 </div>`:''}

 <!-- Events at this venue --> ${events?.length?`
 <h2 style="font-family:'Syne',sans-serif;font-size:18px;font-weight:700;margin-bottom:16px">Upcoming Events Here</h2> <div style="display:flex;flex-direction:column;gap:10px;margin-bottom:28px"> ${events.map(e=>`
 <div style="background:var(--card);border:1px solid var(--border);border-radius:10px;padding:14px 16px;display:flex;justify-content:space-between;align-items:center;gap:12px"> <div> <div style="font-weight:600;font-size:14px;margin-bottom:3px">${e.title}</div> <div style="font-size:12px;color:var(--sub)">${fmt(e.start_time)} · ${fmtTime(e.start_time)} · ${e.category}
 ${isThisWeek(e.start_time)?'<span class="week-badge" style="margin-left:4px">THIS WEEK</span>':''}</div> </div> <div style="display:flex;gap:8px;align-items:center;flex-shrink:0"> <span style="font-size:13px;font-weight:600;color:${e.is_free?'var(--green)':'var(--text)'}">${e.is_free?'Free':e.price_min?`$${e.price_min}`:''}</span> ${e.ticket_url?`<a href="${e.ticket_url}" target="_blank"><button class="btn-primary" style="padding:7px 14px;font-size:12px">Tickets</button></a>`:''}
 </div> </div>`).join('')}
 </div>`:''}
 </div> <!-- RIGHT: INQUIRY CARD --> <div> <div class="inquiry-card"> <h3>Send a Booking Inquiry</h3> <div id="iqForm"> <div class="field-row"> <div class="field"><label>Your Name</label><input id="iqName" placeholder="Jane Smith"></div> <div class="field"><label>Email</label><input id="iqEmail" type="email" placeholder="you@email.com"></div> </div> <div class="field-row"> <div class="field"><label>Phone</label><input id="iqPhone" placeholder="(614) 555-0000"></div> <div class="field"><label>Event Date</label><input id="iqDate" type="date"></div> </div> <div class="field"><label>Expected Guests</label><input id="iqGuests" type="number" placeholder="100"></div> <div class="field"><label>Tell them about your event</label><textarea id="iqMsg" placeholder="What are you planning? What do you need?"></textarea></div> <div id="iqStatus"></div> <button class="btn-primary" style="width:100%;padding:13px" onclick="sendInquiry('${venue.id}')">Send Inquiry →</button> </div> </div> </div> </div> </div> ${footer()}
 `;
}

async function sendInquiry(venueId){
 const name=document.getElementById('iqName')?.value.trim();
 const email=document.getElementById('iqEmail')?.value.trim();
 const msg=document.getElementById('iqMsg')?.value.trim();
 const st=document.getElementById('iqStatus');
 if(!name||!email||!msg){if(st)st.innerHTML='<p style="color:var(--orange);font-size:13px;margin-bottom:10px"> Please fill in name, email, and message.</p>';return;}
 const{error}=await sb.from('inquiries').insert({
 venue_id:venueId,name,email,
 phone:document.getElementById('iqPhone')?.value||null,
 event_date:document.getElementById('iqDate')?.value||null,
 guest_count:document.getElementById('iqGuests')?.value?parseInt(document.getElementById('iqGuests').value):null,
 message:msg,status:'new'
 });
 if(error){if(st)st.innerHTML=`<p style="color:var(--orange);font-size:13px;margin-bottom:10px"> ${error.message}</p>`;return;}
 document.getElementById('iqForm').innerHTML=`
 <div style="background:#0a2a14;border:1px solid #1a4a24;border-radius:10px;padding:24px;text-align:center;color:var(--green)"> <div style="font-size:32px;margin-bottom:8px"></div> <div style="font-weight:700;font-size:16px;margin-bottom:6px">Inquiry Sent!</div> <div style="font-size:13px;opacity:0.8">The venue will be in touch soon.</div> </div>`;
}

// ── CATEGORY PAGE ─────────────────────────────────────────────
function renderCategory(cat){
 const cats={
 bars:{ name:'Columbus Bars & Nightlife', icon:'', desc:'From hidden speakeasies to rooftop lounges, Short North dive bars to late-night clubs — Columbus has a bar for every night out.', keys:['bar','tavern','pub','dive','speakeasy','cocktail','brewery','rooftop','nightlife','lounge','social','theme'] },
 comedy:{ name:'Columbus Comedy Clubs', icon:'', desc:'Columbus has a thriving comedy scene with dedicated clubs, improv theatres, and performance spaces running shows every week.', keys:['comedy','improv','sketch','performance'] },
 rooftop:{ name:'Columbus Rooftop Bars', icon:'', desc:'Sip cocktails above the Columbus skyline. These rooftop venues offer the best views in the city.', keys:['rooftop'] },
 music:{ name:'Columbus Live Music Venues', icon:'', desc:"From jazz dives to full concert halls, Columbus's live music scene punches above its weight.", amenityKey:'stage' },
 dive:{ name:'Columbus Dive Bars', icon:'', desc:"Columbus's best no-frills, no-pretense bars. Cheap drinks, pool tables, and real regulars.", keys:['dive'] },
 events:{ name:'Columbus Private Event Venues', icon:'', desc:'Venues that specialize in private bookings — birthdays, corporate events, weddings, and more.', tagKey:'private' },
 };
 const c=cats[cat]||cats.bars;
 let venues;
 if(c.amenityKey) venues=allVenues.filter(v=>(v.amenities||[]).join(' ').toLowerCase().includes(c.amenityKey));
 else if(c.tagKey) venues=allVenues.filter(v=>(v.tags||[]).join(' ').toLowerCase().includes(c.tagKey));
 else venues=allVenues.filter(v=>c.keys.some(k=>(v.venue_type||'').toLowerCase().includes(k)));

 // Events for this category
 const catEventMap={bars:['Nightlife','Concert'],comedy:['Comedy'],rooftop:['Nightlife'],music:['Concert'],dive:['Concert'],events:[]};
 const evCats=catEventMap[cat]||[];
 const catEvents=evCats.length?allEvents.filter(e=>evCats.includes(e.category)).slice(0,6):[];

 document.title=`${c.name} — CBUSEVENTS`;

 document.getElementById('app').innerHTML=`
 <div class="cat-hero"> <div class="breadcrumb"> <button onclick="showPage('home')">Home</button> <span>›</span> <button onclick="showPage('venues')">Venues</button> <span>›</span> <span>${c.name}</span> </div> <div style="font-size:48px;margin-bottom:12px">${c.icon}</div> <h1 class="cat-hero-title">${c.name}</h1> <p class="cat-hero-sub">${c.desc}</p> <div style="margin-top:16px;color:var(--orange);font-size:14px;font-weight:600">${venues.length} venues in Columbus</div> </div> <section class="section"> <div class="venue-grid">${venues.map(v=>venueCard(v)).join('')||'<div class="empty"><div class="empty-icon">${c.icon}</div><h3>No venues in this category yet</h3></div>'}</div> </section> ${catEvents.length?`
 <section class="section section-alt"> <div class="section-header"> <div><div class="section-title">Upcoming ${c.icon} Events</div></div> <button class="see-all" onclick="showPage('events')">See all →</button> </div> <div class="event-grid">${catEvents.map(e=>eventCard(e)).join('')}</div> </section>`:''}

 ${footer()}
 `;
}

// ── CARDS ─────────────────────────────────────────────────────
function venueCard(v){
 const img=getVenueImg(v);
 const tw=allEvents.filter(e=>e.venue_id===v.id&&isThisWeek(e.start_time)).length;
 return`<div class="venue-card" onclick="showPage('venue',allVenues.find(x=>x.id==='${v.id}'))"> <div class="venue-card-img"> ${img?`<img src="${img}" alt="${v.name}" style="width:100%;height:100%;object-fit:cover" onerror="this.parentNode.innerHTML='<div style=width:100%;height:170px;display:flex;align-items:center;justify-content:center;font-size:44px>${venueEmoji(v.venue_type)}</div>'">`:`<div style="width:100%;height:170px;display:flex;align-items:center;justify-content:center;font-size:44px;color:var(--muted)">${venueEmoji(v.venue_type)}</div>`}
 ${v.tier==='premium'?'<div class="venue-tier-badge tier-premium">⭐ Premium</div>':v.tier==='standard'?'<div class="venue-tier-badge tier-standard"> Standard</div>':''}
 ${tw?`<div style="position:absolute;bottom:8px;left:8px;background:var(--green);color:#000;border-radius:20px;padding:2px 10px;font-size:10px;font-weight:700">${tw} event${tw>1?'s':''} this week</div>`:''}
 </div> <div class="venue-card-body"> <div class="venue-card-type">${v.venue_type||'Venue'}</div> <div class="venue-card-name">${v.name}</div> <div class="venue-card-desc">${v.description||''}</div> <div class="venue-card-footer"> <span class="venue-card-loc"> ${v.neighborhood||v.city}</span> ${v.capacity?`<span style="font-size:12px;color:var(--muted)"> ${v.capacity}</span>`:''}
 </div> <div class="tags">${(v.tags||[]).slice(0,3).map(t=>`<span class="tag">${t}</span>`).join('')}</div> </div> </div>`;
}

function eventCard(e){
 const tw=isThisWeek(e.start_time);
 const promo=isPromoted(e);
 return`<div class="event-card" onclick="openEventModal('${e.id}')" style="${promo?'border-color:#f59e0b60;background:linear-gradient(135deg,var(--card),#1a1200)':''}"> <div class="event-accent${tw?' green':''}" style="${promo?'background:#f59e0b':''}"></div> <div class="event-body"> <div class="event-cat"> ${promo?'<span style="background:#f59e0b20;color:#f59e0b;border:1px solid #f59e0b40;border-radius:20px;padding:2px 8px;font-size:10px;font-weight:700;margin-right:4px"> FEATURED</span>':''}
 ${e.category||'Event'}${tw?'<span class="week-badge">THIS WEEK</span>':''}
 </div> <div class="event-title">${e.title}</div> <div class="event-venue"> ${e.venues?.name||'Columbus Venue'}</div> <div class="event-pills"> <span class="event-pill"> ${fmt(e.start_time)}</span> <span class="event-pill"> ${fmtTime(e.start_time)}</span> ${e.is_free?'<span class="event-pill free">Free</span>':e.price_min?`<span class="event-pill">From $${e.price_min}</span>`:''}
 </div> </div> </div>`;
}

// ── EVENT MODAL ───────────────────────────────────────────────
function openEventModal(id){
 const e=allEvents.find(x=>x.id===id);
 if(!e)return;
 const venue=allVenues.find(v=>v.id===e.venue_id);
 document.getElementById('eventModalContent').innerHTML=`
 <div style="position:relative"> ${e.cover_image_url?`<img src="${e.cover_image_url}" alt="${e.title}" style="width:100%;height:200px;object-fit:cover" onerror="this.style.display='none'">`:
 `<div style="width:100%;height:140px;display:flex;align-items:center;justify-content:center;font-size:52px;background:var(--surface)"></div>`}
 <button class="modal-close-btn" onclick="closeEventModal()">×</button> ${isThisWeek(e.start_time)?`<div style="position:absolute;top:12px;left:12px;background:var(--green);color:#000;border-radius:20px;padding:3px 12px;font-size:11px;font-weight:700">THIS WEEK</div>`:''}
 </div> <div style="padding:24px"> <div style="font-size:11px;color:var(--orange);font-weight:700;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:8px">${e.category||'Event'}</div> <h2 style="font-family:'Syne',sans-serif;font-size:22px;font-weight:800;margin-bottom:14px">${e.title}</h2> <div style="display:flex;flex-wrap:wrap;gap:10px;margin-bottom:16px"> <span style="background:var(--surface);border-radius:8px;padding:6px 12px;font-size:13px"> ${fmt(e.start_time)}</span> <span style="background:var(--surface);border-radius:8px;padding:6px 12px;font-size:13px"> ${fmtTime(e.start_time)}</span> ${e.end_time?`<span style="background:var(--surface);border-radius:8px;padding:6px 12px;font-size:13px">Until ${fmtTime(e.end_time)}</span>`:''}
 ${e.is_free?`<span style="background:#0a2a14;border:1px solid #1a4a24;border-radius:8px;padding:6px 12px;font-size:13px;color:var(--green)"> Free</span>`:e.price_min?`<span style="background:var(--surface);border-radius:8px;padding:6px 12px;font-size:13px"> From $${e.price_min}${e.price_max?` – $${e.price_max}`:''}</span>`:''}
 </div> ${venue?`<div style="display:flex;align-items:center;gap:10px;background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:12px 14px;margin-bottom:16px;cursor:pointer" onclick="closeEventModal();showPage('venue',allVenues.find(x=>x.id==='${venue.id}'))"> <div style="font-size:24px">${venueEmoji(venue.venue_type)}</div> <div><div style="font-weight:600;font-size:14px">${venue.name}</div><div style="font-size:12px;color:var(--sub)"> ${venue.neighborhood||venue.city} — click to view venue</div></div> </div>`:''}
 ${e.description?`<p style="color:var(--sub);font-size:14px;line-height:1.7;margin-bottom:20px">${e.description}</p>`:''}
 <div style="display:flex;gap:10px"> ${e.ticket_url?`<a href="${e.ticket_url}" target="_blank"><button class="btn-primary">Get Tickets →</button></a>`:''}
 ${venue?`<button class="btn-secondary" onclick="closeEventModal();showPage('venue',allVenues.find(x=>x.id==='${venue.id}'))">View Venue</button>`:''}
 </div> </div> `;
 document.getElementById('eventModal').style.display='flex';
 document.body.style.overflow='hidden';
}
function closeEventModal(){
 document.getElementById('eventModal').style.display='none';
 document.body.style.overflow='';
}

// ── FOOTER ────────────────────────────────────────────────────
function footer(){
 return`<footer> <div class="footer-grid"> <div> <div class="footer-logo">CBUS<span>EVENTS</span></div> <p class="footer-desc">The Columbus event directory connecting venues, organizers, and audiences. Discover spaces, find events, make things happen.</p> </div> <div class="footer-col"> <h4>Discover</h4> <div class="footer-link" onclick="showPage('venues')">All Venues</div> <div class="footer-link" onclick="showPage('events')">Upcoming Events</div> <div class="footer-link" onclick="showPage('category','bars')">Bars & Nightlife</div> <div class="footer-link" onclick="showPage('category','comedy')">Comedy Clubs</div> <div class="footer-link" onclick="showPage('category','rooftop')">Rooftop Bars</div> </div> <div class="footer-col"> <h4>For Venues</h4> <div class="footer-link" onclick="window.open('https://cbusevents.com/cbus-venue-portal.html','_blank')">List Your Venue</div> <div class="footer-link" onclick="window.open('https://cbusevents.com/cbus-venue-portal.html','_blank')">Manage Events</div> <div class="footer-link" onclick="showPricing()">Pricing Plans</div> <div class="footer-link" onclick="window.open('https://cbusevents.com/cbus-venue-portal.html','_blank')">Venue Sign In</div> </div> <div class="footer-col"> <h4>For Planners</h4> <div class="footer-link" onclick="window.open('https://cbusevents.com/cbus-planner-portal.html','_blank')">Create Free Account</div> <div class="footer-link" onclick="window.open('https://cbusevents.com/cbus-planner-portal.html','_blank')">Browse Venues</div> <div class="footer-link" onclick="window.open('https://cbusevents.com/cbus-planner-portal.html','_blank')">List Your Event</div> <div class="footer-link" onclick="window.open('https://cbusevents.com/cbus-planner-portal.html','_blank')">Boost an Event</div> </div> <div class="footer-col"> <h4>Columbus</h4> <div class="footer-link" onclick="homeNeighborhood&&homeNeighborhood('Short North',{classList:{remove:()=>{},add:()=>{}}})">Short North</div> <div class="footer-link">Downtown</div> <div class="footer-link">Clintonville</div> <div class="footer-link">Easton</div> <div class="footer-link">Brewery District</div> </div> </div> <div class="footer-bottom"> <span class="footer-copy">© 2026 CBUSEVENTS · Columbus, Ohio</span> <div style="display:flex;align-items:center;gap:20px"> <span class="footer-copy">Made for Columbus </span> <a href="https://cbusevents.com/cbus-admin.html" style="color:var(--muted);font-size:11px;font-weight:600;letter-spacing:0.5px;opacity:0.5;transition:opacity 0.2s" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.5'">Admin</a> </div> </div> </footer>`;
}


// ── VENUE LANDING PAGE ───────────────────────────────────────
function renderVenueLanding(){
 setNavActive('');
 document.getElementById('app').innerHTML=`
 <div style="max-width:960px;margin:0 auto;padding:52px 32px"> <!-- Hero --> <div style="text-align:center;margin-bottom:60px"> <div style="display:inline-flex;align-items:center;gap:6px;background:#FF6B3520;color:#FF6B35;border:1px solid #FF6B3540;border-radius:20px;padding:4px 14px;font-size:11px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;margin-bottom:16px"> For Venue Owners</div> <h1 style="font-family:'Syne',sans-serif;font-size:clamp(28px,5vw,48px);font-weight:800;margin-bottom:14px;line-height:1.1">Get your Columbus venue in front of<br><span style="color:#FF6B35">thousands of event planners</span></h1> <p style="color:#8888a0;font-size:16px;max-width:540px;margin:0 auto 28px;line-height:1.65">CBUSEVENTS is Columbus's go-to directory for bars, comedy clubs, rooftops, and unique event spaces. List free and start getting discovered today.</p> <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-bottom:14px"> <button onclick="window.open('https://cbusevents.com/cbus-venue-portal.html','_blank')" style="background:#FF6B35;color:#fff;border:none;border-radius:10px;padding:14px 32px;font-size:16px;font-weight:700;cursor:pointer;font-family:'DM Sans',sans-serif">Create Free Listing →</button> <button onclick="window.open('https://cbusevents.com/cbus-venue-portal.html','_blank')" style="background:transparent;color:#e8e8f0;border:1.5px solid #25252f;border-radius:10px;padding:13px 24px;font-size:15px;font-weight:500;cursor:pointer;font-family:'DM Sans',sans-serif">Sign In</button> </div> <p style="color:#55556a;font-size:13px">Free to list · No credit card needed · Takes 5 minutes</p> </div> <!-- Benefits grid --> <div style="margin-bottom:60px"> <h2 style="font-family:'Syne',sans-serif;font-size:22px;font-weight:800;text-align:center;margin-bottom:32px">Everything your venue needs to grow bookings</h2> <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px"> ${[
 {icon:'',title:'Get Discovered',desc:'Show up when Columbus locals and event planners search for bars, comedy clubs, rooftops, and unique event spaces.',badge:''},
 {icon:'',title:'Manage Your Events',desc:'Add and publish events directly from your dashboard. Keep your calendar live and visible to thousands.',badge:''},
 {icon:'',title:'Receive Booking Requests',desc:'Event planners send inquiries straight to your portal inbox. Name, email, date, guest count — everything you need.',badge:''},
 {icon:'',title:'Analytics Dashboard',desc:'See how many people viewed your listing, clicked through, and sent inquiries every month.',badge:'Standard+'},
 {icon:'⭐',title:'Priority Placement',desc:'Standard and Premium venues appear at the top of search results and category pages.',badge:'Standard+'},
 {icon:'',title:'Hero Slider',desc:'Premium venues rotate through the homepage hero — maximum visibility across the entire site.',badge:'Premium'},
 {icon:'',title:'Free Flyer Design',desc:'Get custom event flyers designed for your social media and print — included with Premium.',badge:'Premium'},
 {icon:'',title:'Merch On Demand',desc:'Branded shirts, hats, and more printed via heat press and ready for your staff and events.',badge:'Premium'},
 ].map(b=>`
 <div style="background:#1a1a24;border:1px solid #25252f;border-radius:14px;padding:22px"> <div style="font-size:28px;margin-bottom:10px">${b.icon}</div> <div style="display:flex;align-items:center;gap:8px;margin-bottom:6px"> <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:15px">${b.title}</div> ${b.badge?`<span style="background:#FF6B3520;color:#FF6B35;border:1px solid #FF6B3530;border-radius:20px;padding:1px 8px;font-size:10px;font-weight:700">${b.badge}</span>`:''}
 </div> <div style="color:#8888a0;font-size:13px;line-height:1.6">${b.desc}</div> </div>`).join('')}
 </div> </div> <!-- Pricing --> <div style="margin-bottom:60px"> <h2 style="font-family:'Syne',sans-serif;font-size:22px;font-weight:800;text-align:center;margin-bottom:8px">Simple, transparent pricing</h2> <p style="color:#8888a0;font-size:14px;text-align:center;margin-bottom:32px">Start free. Upgrade when you're ready to grow.</p> <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px"> ${[
 {name:'Free',price:0,color:'#8888a0',perks:['1 venue listing','Up to 4 events','Basic search placement','Public venue page']},
 {name:'Standard',price:29,color:'#60a5fa',perks:['Up to 20 events/month','Priority search placement','Inquiry form enabled','Email support','Analytics dashboard']},
 {name:'Premium',price:79,color:'#FF6B35',popular:true,perks:['Unlimited events','Hero slider feature','Top of every page','Full analytics',' Free flyer design',' Merch on demand']},
 ].map(p=>`
 <div style="background:${p.popular?'linear-gradient(135deg,#1a0800,#1a0f00)':'#13131a'};border:${p.popular?'2px solid #FF6B3550':'1px solid #25252f'};border-radius:14px;padding:24px;position:relative"> ${p.popular?'<div style="position:absolute;top:-12px;left:50%;transform:translateX(-50%);background:#FF6B35;color:#fff;border-radius:20px;padding:2px 14px;font-size:11px;font-weight:700;white-space:nowrap">MOST POPULAR</div>':''}
 <div style="font-size:11px;color:${p.color};font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px">${p.name}</div> <div style="font-family:'Syne',sans-serif;font-size:32px;font-weight:800;margin-bottom:16px">${p.price===0?'Free':'$'+p.price}<span style="font-size:14px;color:#8888a0;font-weight:400">${p.price>0?'/mo':''}</span></div> <div style="display:flex;flex-direction:column;gap:8px;margin-bottom:20px"> ${p.perks.map(k=>'<div style="display:flex;gap:8px;font-size:13px;color:#8888a0">'+k+'</div>').join('')}
 </div> <button onclick="window.open('https://cbusevents.com/cbus-venue-portal.html','_blank')" style="width:100%;background:${p.popular?'#FF6B35':'#1a1a24'};color:${p.popular?'#fff':'#e8e8f0'};border:1px solid ${p.popular?'#FF6B35':'#25252f'};border-radius:8px;padding:10px;font-size:14px;font-weight:600;cursor:pointer;font-family:'DM Sans',sans-serif">Get Started →</button> </div>`).join('')}
 </div> </div> <!-- Social proof --> <div style="background:#13131a;border:1px solid #25252f;border-radius:16px;padding:36px;text-align:center;margin-bottom:32px"> <div style="font-size:36px;margin-bottom:12px"></div> <h3 style="font-family:'Syne',sans-serif;font-size:20px;font-weight:800;margin-bottom:8px">Join 23+ Columbus venues already on CBUSEVENTS</h3> <p style="color:#8888a0;font-size:14px;margin-bottom:24px;line-height:1.65">Dick's Den, Lincoln Social Rooftop, Columbus Funny Bone, Sacred Palm, The Hashtag Comedy Club and more are already getting discovered daily.</p> <button onclick="window.open('https://cbusevents.com/cbus-venue-portal.html','_blank')" style="background:#FF6B35;color:#fff;border:none;border-radius:10px;padding:13px 32px;font-size:15px;font-weight:700;cursor:pointer;font-family:'DM Sans',sans-serif">Create Your Free Listing →</button> </div> </div> `;
 window.scrollTo({top:0,behavior:'smooth'});
}

// ── PRICING MODAL ─────────────────────────────────────────────
function showPricing(){
 const el=document.createElement('div');
 el.id='pricingModal';
 el.style.cssText='position:fixed;inset:0;background:rgba(0,0,0,0.88);z-index:500;display:flex;align-items:center;justify-content:center;padding:24px;overflow-y:auto';
 el.innerHTML=`
 <div style="background:#1a1a24;border:1px solid #25252f;border-radius:20px;width:100%;max-width:860px;overflow:hidden"> <!-- Header --> <div style="display:flex;justify-content:space-between;align-items:center;padding:28px 32px;border-bottom:1px solid #25252f"> <div> <div style="font-family:'Syne',sans-serif;font-size:22px;font-weight:800">Simple, transparent pricing</div> <div style="color:#8888a0;font-size:14px;margin-top:4px">Get your venue in front of Columbus every day</div> </div> <button onclick="document.getElementById('pricingModal').remove()" style="background:#25252f;border:none;color:#8888a0;border-radius:8px;width:36px;height:36px;font-size:18px;cursor:pointer"></button> </div> <!-- Plans --> <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:0;padding:32px;gap:16px"> <!-- Free --> <div style="background:#13131a;border:1px solid #25252f;border-radius:16px;padding:24px;display:flex;flex-direction:column"> <div style="font-size:12px;color:#8888a0;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:10px">Free</div> <div style="font-family:'Syne',sans-serif;font-size:36px;font-weight:800;margin-bottom:4px">$0</div> <div style="color:#8888a0;font-size:13px;margin-bottom:20px">forever</div> <div style="flex:1;display:flex;flex-direction:column;gap:9px;margin-bottom:24px"> ${['1 venue listing','Up to 4 events','Basic search placement','Public venue page'].map(p=>`
 <div style="display:flex;align-items:center;gap:8px;font-size:13px;color:#8888a0"> ${p}
 </div>`).join('')}
 </div> <button onclick="window.open('https://cbusevents.com/cbus-venue-portal.html','_blank');document.getElementById('pricingModal').remove()" style="width:100%;background:#25252f;border:none;color:#e8e8f0;border-radius:9px;padding:11px;font-size:14px;font-weight:600;cursor:pointer;font-family:'DM Sans',sans-serif">Get Started Free</button> </div> <!-- Standard --> <div style="background:#13131a;border:1px solid #25252f;border-radius:16px;padding:24px;display:flex;flex-direction:column"> <div style="font-size:12px;color:#60a5fa;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:10px">Standard</div> <div style="font-family:'Syne',sans-serif;font-size:36px;font-weight:800;margin-bottom:4px">$29<span style="font-size:16px;font-weight:400;color:#8888a0">/mo</span></div> <div style="color:#8888a0;font-size:13px;margin-bottom:20px">cancel anytime</div> <div style="flex:1;display:flex;flex-direction:column;gap:9px;margin-bottom:24px"> ${['Up to 20 events/month','Priority search placement','Inquiry form enabled','Email support','Analytics dashboard'].map(p=>`
 <div style="display:flex;align-items:center;gap:8px;font-size:13px"> ${p}
 </div>`).join('')}
 </div> <button onclick="window.open('https://cbusevents.com/cbus-venue-portal.html','_blank');document.getElementById('pricingModal').remove()" style="width:100%;background:#60a5fa;border:none;color:#000;border-radius:9px;padding:11px;font-size:14px;font-weight:700;cursor:pointer;font-family:'DM Sans',sans-serif">Get Standard →</button> </div> <!-- Premium --> <div style="background:linear-gradient(135deg,#1a1000,#1a0f00);border:2px solid #FF6B3550;border-radius:16px;padding:24px;display:flex;flex-direction:column;position:relative"> <div style="position:absolute;top:-12px;left:50%;transform:translateX(-50%);background:#FF6B35;color:#fff;border-radius:20px;padding:3px 14px;font-size:11px;font-weight:700;white-space:nowrap">MOST POPULAR</div> <div style="font-size:12px;color:#FF6B35;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:10px">Premium</div> <div style="font-family:'Syne',sans-serif;font-size:36px;font-weight:800;margin-bottom:4px">$79<span style="font-size:16px;font-weight:400;color:#8888a0">/mo</span></div> <div style="color:#8888a0;font-size:13px;margin-bottom:20px">cancel anytime</div> <div style="flex:1;display:flex;flex-direction:column;gap:9px;margin-bottom:24px"> ${['Unlimited events','Hero slider feature','Top of every search page','Full analytics suite',' Free flyer design',' Merch design on demand'].map(p=>`
 <div style="display:flex;align-items:center;gap:8px;font-size:13px"> ${p}
 </div>`).join('')}
 </div> <button onclick="window.open('https://cbusevents.com/cbus-venue-portal.html','_blank');document.getElementById('pricingModal').remove()" style="width:100%;background:#FF6B35;border:none;color:#fff;border-radius:9px;padding:11px;font-size:14px;font-weight:700;cursor:pointer;font-family:'DM Sans',sans-serif">Get Premium →</button> </div> </div> <!-- Event boost add-on --> <div style="margin:0 32px 32px;background:#13131a;border:1px solid #f59e0b30;border-radius:14px;padding:20px 24px;display:flex;justify-content:space-between;align-items:center;gap:20px;flex-wrap:wrap"> <div> <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:15px;margin-bottom:4px"> Event Boost Add-on <span style="font-size:12px;background:#f59e0b20;color:#f59e0b;border-radius:20px;padding:2px 8px;font-weight:600">For Planners</span></div> <div style="color:#8888a0;font-size:13px">Pin your event to the top · Hero slider · Highlighted in categories</div> </div> <div style="display:flex;gap:10px;flex-shrink:0"> <div style="text-align:center;background:#0b0b0f;border:1px solid #f59e0b30;border-radius:10px;padding:10px 18px"> <div style="font-family:'Syne',sans-serif;font-size:20px;font-weight:800;color:#f59e0b">$10</div> <div style="color:#8888a0;font-size:11px">7 days</div> </div> <div style="text-align:center;background:#0b0b0f;border:1px solid #f59e0b30;border-radius:10px;padding:10px 18px"> <div style="font-family:'Syne',sans-serif;font-size:20px;font-weight:800;color:#f59e0b">$20</div> <div style="color:#8888a0;font-size:11px">30 days</div> </div> </div> </div> </div> `;
 el.addEventListener('click',e=>{if(e.target===el)el.remove();});
 document.body.appendChild(el);
}

// ── JOIN DROPDOWN ─────────────────────────────────────────────

// ── FAVORITES ─────────────────────────────────────────────────
let currentUserId=null;
let savedVenueIds=new Set();
let savedEventIds=new Set();

async function loadSavedState(){
  try {
    const{data:{session}}=await sb.auth.getSession();
    if(!session?.user) return;
    currentUserId=session.user.id;
    // Show all save buttons
    document.querySelectorAll('.save-btn').forEach(b=>b.style.display='flex');
    document.querySelectorAll('.save-btn').forEach(b=>{b.style.alignItems='center';b.style.justifyContent='center';});
    // Load saved venues
    const{data:saved}=await sb.from('customer_saved_venues').select('venue_id').eq('user_id',currentUserId);
    if(saved) saved.forEach(s=>{
      savedVenueIds.add(s.venue_id);
      const btn=document.getElementById('save-'+s.venue_id);
      if(btn){btn.textContent='♥';btn.classList.add('saved');}
    });
  } catch(e){}
}

async function toggleSave(venueId, btn){
  if(!currentUserId){window.location.href='https://cbusevents.com/auth.html?role=customer';return;}
  const isSaved=savedVenueIds.has(venueId);
  if(isSaved){
    savedVenueIds.delete(venueId);
    btn.textContent='♡';btn.classList.remove('saved');
    await sb.from('customer_saved_venues').delete().eq('user_id',currentUserId).eq('venue_id',venueId);
  } else {
    savedVenueIds.add(venueId);
    btn.textContent='♥';btn.classList.add('saved');
    await sb.from('customer_saved_venues').upsert({user_id:currentUserId,venue_id:venueId},{onConflict:'user_id,venue_id'});
  }
}

function toggleJoinMenu(){
 const m=document.getElementById('joinMenu');
 if(m)m.style.display=m.style.display==='none'?'block':'none';
}

// ── AUTH STATE IN NAV ─────────────────────────────────────
async function initNavAuth(){
  try {
    const{data:{session}}=await sb.auth.getSession();
    const navRight=document.querySelector('nav > div:last-child');
    if(!navRight) return;
    if(session?.user){
      const userId=session.user.id;
      const{data:roleData}=await sb.from('user_roles').select('role').eq('user_id',userId).maybeSingle();
      const role=roleData?.role||'customer';
      const portalUrls={
        venue_owner:'https://cbusevents.com/cbus-venue-portal.html',
        vendor:'https://cbusevents.com/cbus-vendor-portal.html',
        planner:'https://cbusevents.com/cbus-planner-portal.html',
        customer:'https://cbusevents.com/customer-portal.html',
      };
      const portalLabels={
        venue_owner:'Venue Portal',
        vendor:'Vendor Portal',
        planner:'Planner Portal',
        customer:'My Account'
      };
      navRight.innerHTML=`
        <button class="nav-link" onclick="window.location.href='${portalUrls[role]||portalUrls.customer}'" style="color:var(--orange);font-weight:600">${portalLabels[role]||'My Account'}</button>
        <button class="nav-cta" onclick="sb.auth.signOut().then(()=>window.location.reload())" style="background:#1a1a24;border:1px solid #25252f;color:#8888a0;cursor:pointer">Sign Out</button>
      `;
    } else {
      // Not logged in — restore default nav
      navRight.innerHTML=`
        <div style="position:relative" id="joinDropdown">
          <button class="nav-link" onclick="toggleJoinMenu()" style="display:flex;align-items:center;gap:4px">Join ▾</button>
          <div id="joinMenu" style="display:none;position:absolute;top:calc(100% + 4px);right:0;background:#1a1a24;border:1px solid #25252f;border-radius:12px;padding:8px;min-width:190px;box-shadow:0 16px 40px rgba(0,0,0,0.5);z-index:200;">
            <a href="https://cbusevents.com/venues.html" class="join-item">List Your Venue</a>
            <a href="https://cbusevents.com/vendors.html" class="join-item">List Your Services</a>
            <a href="https://cbusevents.com/planners.html" class="join-item">Event Planners</a>
            <div style="height:1px;background:#25252f;margin:4px 8px;"></div>
            <a href="https://cbusevents.com/attendees.html" class="join-item">Find Events</a>
          </div>
        </div>
        <a href="https://cbusevents.com/auth.html" class="nav-cta" style="text-decoration:none">Sign In</a>
      `;
    }
  } catch(e){ console.warn('Nav auth error:',e); }
}
document.addEventListener('click',function(e){
 const d=document.getElementById('joinDropdown');
 const m=document.getElementById('joinMenu');
 if(d&&m&&!d.contains(e.target))m.style.display='none';
});

// ── START ─────────────────────────────────────────────────────
setNavActive('home');
init();

</script>
</body>
</html>
